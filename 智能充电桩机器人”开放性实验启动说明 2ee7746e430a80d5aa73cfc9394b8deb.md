# 智能充电桩机器人”开放性实验启动说明

## A：正常充电测试（观察 Feedback）

**终端 1：启动 Action Server**

```bash
source /opt/ros/$ROS_DISTRO/setup.bash
source ~/ros2_charge_ws/install/setup.bash
ros2 run charge_station_py charge_action_server --ros-args -p rate_percent_per_sec:=5

```

**终端 2：启动 Client 充到 100%**

```bash
source ~/ros2_charge_ws/install/setup.bash
ros2 run charge_station_py charge_action_client --ros-args -p target_percent:=100

```

观察：Client 是否每秒打印一次反馈，不阻塞主程序（Action 天生异步）。

---

## B：紧急任务抢占（观察 Cancel）

方式 1（命令行取消，不推荐）：

**终端 2 先发送一个慢任务：**

```bash
ros2 run charge_station_py charge_action_client --ros-args -p target_percent:=100

```

等到大概 50% 时，在**终端 3**执行：

```bash
source ~/ros2_charge_ws/install/setup.bash
ros2 action cancel /charge

```

观察点：

- 服务端是否立刻停止循环并进入 canceled
- Client Result 是否 success=false 且 message 提示 canceled

方式 2（自动取消，推荐）：

```bash
ros2 run charge_station_py charge_action_client --ros-args -p target_percent:=100 -p cancel_at_percent:=50

```

---

## C：非法目标拦截（观察 Goal Response 阶段 REJECT）

发送非法目标：`-10` 或 `200`

```bash
ros2 run charge_station_py charge_action_client --ros-args -p target_percent:=200

```

观察：Client 直接打印 “Goal rejected”，服务端不会进入 execute 循环。